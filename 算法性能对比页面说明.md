# 📊 算法性能对比页面功能说明

## 🎯 功能概述

新增了一个独立的**算法性能对比页面**，完整展示KDD 2025论文中50节点和20节点路由问题的所有算法数据，采用动态柱状图形式呈现。

---

## ✨ 主要功能

### 1. **多维度数据筛选** 🎛️

用户可以通过4个下拉菜单灵活筛选数据：

| 筛选维度 | 选项 | 说明 |
|---------|------|------|
| **节点规模** | 50节点 / 20节点 | 问题规模 |
| **问题类型** | TSP / CVRP / OP / PCTSP / PDP | 5种路由问题 |
| **评估指标** | Gap / Cost / Time | 质量/成本/时间 |
| **算法类别** | 全部/Greedy/Sampling/Multistart/Augmentation | 算法类型 |

### 2. **动态柱状图展示** 📈

**图表特性：**
- 使用ECharts 5.4.3绘制
- 渐变色柱状图（蓝紫渐变）
- 柱状图顶部显示精确数值
- 鼠标悬停显示详细信息（Gap/Cost/Time）
- 平滑动画过渡效果
- 响应式设计，自适应屏幕尺寸

### 3. **实时统计信息** 📊

三张信息卡片显示：

#### 卡片1：当前最佳算法
- 算法名称
- Gap值
- 计算时间

#### 卡片2：数据统计
- 平均Gap
- 最大Gap
- 最小Gap

#### 卡片3：算法数量
- 当前显示数量
- 总算法数
- 经典求解器数量

---

## 📁 文件结构

### 新增文件

```
templates/
  └── benchmark.html          ← 新增：算法对比页面

app.py                        ← 修改：添加/benchmark路由
templates/index.html          ← 修改：添加导航链接
```

### 代码修改

#### 1. `templates/benchmark.html` (新文件)
- **总行数**: 约1300行
- **核心功能**:
  - 完整的KDD 2025数据（50节点和20节点）
  - 交互式筛选控制
  - ECharts动态图表
  - 实时统计计算

#### 2. `app.py` (新增路由)
```python
@app.route('/benchmark')
def benchmark():
    return render_template('benchmark.html')
```

#### 3. `templates/index.html` (导航更新)
```html
<a href="/benchmark">算法对比</a>
```

---

## 📊 数据来源

### KDD 2025 Benchmark数据

#### 50节点数据表 (Table E.1)
- **TSP**: 7个经典求解器 + 42个深度学习方法
- **CVRP**: 2个经典求解器 + 42个深度学习方法
- **OP**: 1个经典求解器 + 42个深度学习方法
- **PCTSP**: 1个经典求解器 + 42个深度学习方法
- **PDP**: 2个经典求解器 + 42个深度学习方法

#### 20节点数据表 (Table E.2)
- **TSP**: 4个经典求解器 + 36个深度学习方法
- **CVRP**: 2个经典求解器 + 36个深度学习方法
- **OP**: 1个经典求解器 + 36个深度学习方法
- **PCTSP**: 2个经典求解器 + 36个深度学习方法
- **PDP**: 2个经典求解器 + 36个深度学习方法

### 数据结构

```javascript
benchmarkData = {
  "50": {
    "TSP": {
      "Classical": [...],
      "Greedy": [...],
      "Sampling": [...],
      "Multistart": [...],
      "Augmentation": [...],
      "Multistart_Aug": [...]
    },
    ...
  },
  "20": {...}
}
```

每个算法数据包含：
```javascript
{
  method: "算法名称",
  gap: Gap值,
  cost: 成本值,
  time: "计算时间"
}
```

---

## 🎨 界面设计

### 色彩方案
- **主色**: 蓝紫渐变 (#667eea → #764ba2)
- **背景**: 白色卡片 + 渐变背景
- **强调色**: 绿色（经典求解器）、蓝色（深度学习）

### 布局结构

```
┌─────────────────────────────────────────┐
│  Header (固定顶部导航)                   │
├─────────────────────────────────────────┤
│  Hero Section (标题和说明)               │
├─────────────────────────────────────────┤
│  Control Panel (4个筛选下拉框)           │
├─────────────────────────────────────────┤
│  Info Cards (3张统计卡片)                │
├─────────────────────────────────────────┤
│  Chart Container (动态柱状图)            │
│  ├─ Chart Title                         │
│  ├─ ECharts Bar Chart                   │
│  └─ Legend Box                          │
├─────────────────────────────────────────┤
│  Footer (版权信息)                       │
└─────────────────────────────────────────┘
```

---

## 🔧 技术实现

### 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| **ECharts** | 5.4.3 | 图表绘制 |
| **HTML5** | - | 页面结构 |
| **CSS3** | - | 样式和动画 |
| **JavaScript** | ES6+ | 交互逻辑 |

### 核心函数

#### 1. `updateCharts()`
```javascript
function updateCharts() {
  // 1. 获取用户选择
  const nodeSize = document.getElementById('node-select').value;
  const problem = document.getElementById('problem-select').value;
  const metric = document.getElementById('metric-select').value;
  const category = document.getElementById('category-select').value;
  
  // 2. 筛选数据
  const data = benchmarkData[nodeSize][problem];
  let allMethods = [...]; // 根据category筛选
  
  // 3. 提取指标值
  const methods = allMethods.map(d => d.method);
  const values = allMethods.map(d => d[metric]);
  
  // 4. 更新统计信息
  updateStatistics(allMethods, metric);
  
  // 5. 配置并渲染图表
  myChart.setOption(option, true);
}
```

#### 2. 时间转换
```javascript
// 将时间字符串转换为秒
"2m" → 120秒
"1m24s" → 84秒
"4h" → 14400秒
"<1s" → 1秒
```

---

## 🚀 使用方法

### 1. 启动应用

```bash
python app.py
```

### 2. 访问页面

浏览器打开：
```
http://localhost:5000/benchmark
```

或从主页导航栏点击"算法对比"

### 3. 交互操作

1. **选择节点规模**: 50节点 或 20节点
2. **选择问题类型**: TSP / CVRP / OP / PCTSP / PDP
3. **选择评估指标**: Gap / Cost / Time
4. **选择算法类别**: 全部 或 特定类别
5. **查看图表**: 自动更新动态柱状图
6. **悬停查看**: 鼠标移到柱状图上查看详细信息

---

## 📈 数据展示示例

### 示例1: TSP问题-50节点-Gap对比

**筛选条件**:
- 节点规模: 50
- 问题类型: TSP
- 评估指标: Gap
- 算法类别: Greedy One Shot

**显示结果**:
```
A2C: 2.22%
AM: 1.41%
POMO: 0.89%
Sym-NCO: 0.47%
AM-XL: 0.54%
AM-PPO: 0.92%
PolyNet: 0.68%
```

**柱状图**:
- X轴: 算法名称
- Y轴: Gap (%)
- 最佳: Sym-NCO (0.47%)

### 示例2: CVRP问题-20节点-Time对比

**筛选条件**:
- 节点规模: 20
- 问题类型: CVRP
- 评估指标: Time
- 算法类别: Sampling

**显示结果**:
```
A2C: 24秒
AM: 24秒
POMO: 40秒
Sym-NCO: 40秒
AM-XL: 40秒
PolyNet: 75秒
```

---

## 💡 特色功能

### 1. **智能统计**
- 自动计算平均值、最大值、最小值
- 自动识别最佳算法
- 实时更新统计卡片

### 2. **视觉强化**
- 鼠标悬停显示完整信息
- 柱状图顶部显示精确数值
- 强调色高亮最佳结果

### 3. **用户友好**
- 一键切换不同维度
- 平滑动画过渡
- 响应式布局（支持移动端）

### 4. **数据完整性**
- 包含所有经典求解器数据
- 包含所有深度学习方法
- 6种算法类别完整覆盖

---

## 📋 算法类别说明

### 1. **Classical Solvers** (经典求解器)
- Gurobi, Concorde, LKH3, HGS, OR Tools, CPLEX
- 精确或启发式求解器
- 通常运行时间较长但质量最优

### 2. **Greedy One Shot** (贪心一次评估)
- 单次前向传播
- 速度最快（<1秒）
- 质量中等

### 3. **Sampling** (采样 M=1280)
- 采样1280次取最优
- 速度中等（20秒-2分钟）
- 质量较好

### 4. **Greedy Multistart** (贪心多起点)
- 多个随机起点
- 速度快（1-10秒）
- 质量介于One Shot和Sampling之间

### 5. **With Augmentation** (数据增强)
- 对输入进行8种变换
- 速度慢（1-3分钟）
- 质量最好

### 6. **Multistart + Augmentation**
- 结合多起点和数据增强
- 速度和质量的平衡

---

## 🎯 性能指标解释

### Gap (质量差距)
```
Gap = (算法结果 - 最优结果) / 最优结果 × 100%
```
- **越小越好**
- 0%表示达到最优
- <1%表示接近最优
- >10%表示质量较差

### Cost (总成本)
- TSP: 总路径长度
- CVRP: 总行驶距离
- OP: 总收集奖励（越大越好）
- PCTSP: 总成本（距离+罚金）
- PDP: 总行驶距离

### Time (计算时间)
- **越短越好**
- <1s: 实时级别
- 1s-1m: 快速
- 1m-1h: 中等
- >1h: 慢速（经典求解器）

---

## 📱 响应式设计

### 桌面端 (>768px)
- 4列控制面板
- 3列信息卡片
- 完整图表高度（600px）

### 移动端 (<768px)
- 1列控制面板
- 1列信息卡片
- 紧凑图表高度（400px）
- X轴标签旋转45度

---

## 🔍 数据验证

所有数据来自论文表格：
- ✅ Table E.1 (50 nodes)
- ✅ Table E.2 (20 nodes)

数据准确性：
- ✅ Gap值精确到小数点后2位
- ✅ Cost值精确到小数点后2位
- ✅ Time值完整保留原格式

---

## 🎨 视觉效果

### 动画效果
- 页面加载淡入动画（0.6s）
- 卡片悬停上浮效果
- 图表切换平滑过渡（1s）
- 柱状图渐变色填充

### 交互反馈
- 下拉框聚焦高亮
- 按钮悬停变色
- 图表元素高亮

---

## 🛠️ 自定义配置

### 修改颜色方案

```javascript
// 柱状图渐变色
itemStyle: {
  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
    {offset: 0, color: '#667eea'},  // 修改起始颜色
    {offset: 1, color: '#764ba2'}   // 修改结束颜色
  ])
}
```

### 修改图表高度

```css
.chart {
  height: 600px;  /* 修改为想要的高度 */
}
```

### 添加新的问题类型

```javascript
benchmarkData["50"]["NewProblem"] = {
  "Classical": [...],
  "Greedy": [...],
  ...
};
```

---

## 📊 完整数据统计

### 50节点
| 问题 | 经典求解器 | DL方法 | 总计 |
|------|-----------|--------|------|
| TSP | 4 | 42 | 46 |
| CVRP | 2 | 42 | 44 |
| OP | 1 | 42 | 43 |
| PCTSP | 1 | 42 | 43 |
| PDP | 2 | 42 | 44 |
| **总计** | **10** | **210** | **220** |

### 20节点
| 问题 | 经典求解器 | DL方法 | 总计 |
|------|-----------|--------|------|
| TSP | 4 | 36 | 40 |
| CVRP | 2 | 36 | 38 |
| OP | 1 | 36 | 37 |
| PCTSP | 2 | 36 | 38 |
| PDP | 2 | 36 | 38 |
| **总计** | **11** | **180** | **191** |

**全部数据点**: 411个算法结果

---

## ✅ 功能清单

- [x] 完整录入50节点数据（220个数据点）
- [x] 完整录入20节点数据（191个数据点）
- [x] 实现4维度筛选功能
- [x] 动态柱状图渲染
- [x] 实时统计信息更新
- [x] 响应式设计
- [x] 鼠标悬停详情
- [x] 导航集成
- [x] 数据验证
- [x] 视觉美化
- [x] 动画效果
- [x] 移动端适配

---

## 🎓 总结

这个算法性能对比页面提供了：

1. **完整性**: 涵盖KDD 2025论文的所有Benchmark数据
2. **交互性**: 多维度筛选和动态图表
3. **直观性**: 美观的柱状图和清晰的统计信息
4. **专业性**: 基于顶会论文的权威数据
5. **易用性**: 简洁的界面和流畅的交互

**访问地址**: `http://localhost:5000/benchmark`

---

**更新时间**: 2025年  
**数据来源**: KDD 2025 Conference  
**平台**: RL4CO 强化学习优化平台  
**单位**: 山西大学 计算机科学与技术学院

