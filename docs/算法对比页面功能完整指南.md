# 算法性能对比页面 - 完整指南

> 展示KDD 2025论文中50节点和20节点路由问题的所有算法benchmark数据，采用交互式动态图表呈现。

---

## 📋 目录

1. [功能概述](#功能概述)
2. [主要功能](#主要功能)
3. [使用方法](#使用方法)
4. [数据说明](#数据说明)
5. [技术实现](#技术实现)
6. [自定义配置](#自定义配置)

---

## 功能概述

### 核心功能

新增了一个独立的**算法性能对比页面**，完整展示KDD 2025论文中50节点和20节点路由问题的所有算法数据，采用动态柱状图形式呈现。

### 访问方式

**方法一**: 通过导航栏
```
主页 → 点击顶部导航 "算法对比"
```

**方法二**: 直接访问
```
http://localhost:5000/benchmark
```

### 展示内容

- ✅ 50节点和20节点两种规模
- ✅ TSP、CVRP、OP、PCTSP、PDP五种问题
- ✅ Gap、Cost、Time三种评估指标
- ✅ 6种算法类别（Classical、Greedy、Sampling、Multistart、Augmentation等）
- ✅ 共411个算法结果数据点

---

## 主要功能

### 1. 多维度数据筛选

用户可以通过4个下拉菜单灵活筛选数据：

| 筛选维度 | 选项 | 说明 |
|---------|------|------|
| **节点规模** | 50节点 / 20节点 | 问题规模 |
| **问题类型** | TSP / CVRP / OP / PCTSP / PDP | 5种路由问题 |
| **评估指标** | Gap / Cost / Time | 质量/成本/时间 |
| **算法类别** | 全部/Greedy/Sampling/Multistart/Augmentation | 算法类型 |

#### 筛选示例

```
选择：50节点 + TSP + Gap + Greedy One Shot
结果：显示所有贪心策略在50节点TSP上的Gap对比
```

### 2. 动态柱状图展示

#### 图表特性
- ✅ 使用ECharts 5.4.3绘制
- ✅ 渐变色柱状图（蓝紫渐变）
- ✅ 柱状图顶部显示精确数值
- ✅ 鼠标悬停显示详细信息（Gap/Cost/Time）
- ✅ 平滑动画过渡效果
- ✅ 响应式设计，自适应屏幕尺寸

#### 图表配置
```javascript
{
    type: 'bar',
    barWidth: '60%',
    itemStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            {offset: 0, color: '#667eea'},  // 起始颜色
            {offset: 1, color: '#764ba2'}   // 结束颜色
        ])
    },
    label: {
        show: true,
        position: 'top',
        formatter: '{c}'  // 显示数值
    }
}
```

### 3. 实时统计信息

三张信息卡片显示：

#### 卡片1: 当前最佳算法
```
算法名称: POMO
Gap: 0.89%
计算时间: <1s
```

#### 卡片2: 数据统计
```
平均Gap: 1.25%
最大Gap: 2.45%
最小Gap: 0.47%
```

#### 卡片3: 算法数量
```
当前显示: 8 个
总算法数: 46 个
经典求解器: 4 个
```

---

## 使用方法

### 快速开始

#### 1. 打开页面
```bash
# 启动服务器
python app.py

# 浏览器访问
http://localhost:5000/benchmark
```

#### 2. 选择参数
```
步骤1: 选择节点规模（50或20）
步骤2: 选择问题类型（TSP/CVRP/OP/PCTSP/PDP）
步骤3: 选择评估指标（Gap/Cost/Time）
步骤4: 选择算法类别（全部或特定类别）
```

#### 3. 查看结果
```
✅ 图表自动更新
✅ 统计卡片显示最新数据
✅ 鼠标悬停查看详细信息
```

### 使用示例

#### 示例1: 查看TSP问题的最佳算法

**操作步骤**:
```
1. 节点规模: 50
2. 问题类型: TSP
3. 评估指标: Gap
4. 算法类别: 全部
```

**查看结果**:
```
柱状图显示所有算法的Gap值
最佳算法卡片显示: Sym-NCO (0.47%)
```

#### 示例2: 对比不同采样策略

**操作步骤**:
```
1. 节点规模: 50
2. 问题类型: TSP
3. 评估指标: Gap
4. 算法类别: Sampling
```

**查看结果**:
```
只显示采样类算法（M=1280）
可以对比不同模型采样后的效果
```

#### 示例3: 查看计算时间对比

**操作步骤**:
```
1. 节点规模: 20
2. 问题类型: CVRP
3. 评估指标: Time
4. 算法类别: 全部
```

**查看结果**:
```
柱状图显示各算法的计算时间
可以看到深度学习方法（<1s）vs经典求解器（数小时）的对比
```

### 交互操作

| 操作 | 说明 |
|------|------|
| **鼠标悬停** | 显示详细信息（算法名、Gap、Cost、Time） |
| **切换筛选** | 图表平滑过渡，自动更新统计 |
| **滚动查看** | 算法较多时可滚动查看 |

---

## 数据说明

### 数据来源

**KDD 2025 Benchmark数据**

- 来源论文: KDD 2025 Conference
- 数据表: Table E.1 (50 nodes) 和 Table E.2 (20 nodes)
- 数据验证: ✅ 所有数据已与论文核对

### 数据统计

#### 50节点数据

| 问题 | 经典求解器 | 深度学习方法 | 总计 |
|------|-----------|-------------|------|
| **TSP** | 4 | 42 | 46 |
| **CVRP** | 2 | 42 | 44 |
| **OP** | 1 | 42 | 43 |
| **PCTSP** | 1 | 42 | 43 |
| **PDP** | 2 | 42 | 44 |
| **总计** | **10** | **210** | **220** |

#### 20节点数据

| 问题 | 经典求解器 | 深度学习方法 | 总计 |
|------|-----------|-------------|------|
| **TSP** | 4 | 36 | 40 |
| **CVRP** | 2 | 36 | 38 |
| **OP** | 1 | 36 | 37 |
| **PCTSP** | 2 | 36 | 38 |
| **PDP** | 2 | 36 | 38 |
| **总计** | **11** | **180** | **191** |

**全部数据点**: 411个算法结果

### 算法类别说明

#### 1. Classical Solvers（经典求解器）
- **算法**: Gurobi, Concorde, LKH3, HGS, OR Tools, CPLEX
- **类型**: 精确或启发式求解器
- **特点**: 运行时间较长但质量最优
- **适用**: 对质量要求极高且时间不敏感的场景

#### 2. Greedy One Shot（贪心一次评估）
- **方法**: 单次前向传播
- **速度**: 最快（<1秒）
- **质量**: 中等
- **适用**: 实时应用、快速原型

#### 3. Sampling (M=1280)（采样）
- **方法**: 采样1280次取最优
- **速度**: 中等（20秒-2分钟）
- **质量**: 较好
- **适用**: 对质量有要求且能接受分钟级延迟

#### 4. Greedy Multistart（贪心多起点）
- **方法**: 多个随机起点
- **速度**: 快（1-10秒）
- **质量**: 介于One Shot和Sampling之间
- **适用**: 质量和速度的折中选择

#### 5. With Augmentation（数据增强）
- **方法**: 对输入进行8种变换
- **速度**: 慢（1-3分钟）
- **质量**: 最好
- **适用**: 离线优化、最优解追求

#### 6. Multistart + Augmentation（组合策略）
- **方法**: 结合多起点和数据增强
- **特点**: 速度和质量的平衡
- **适用**: 重要问题的高质量求解

### 性能指标解释

#### Gap（质量差距）
```
Gap = (算法结果 - 最优结果) / 最优结果 × 100%
```
- **越小越好**
- 0%表示达到最优
- <1%表示接近最优
- >10%表示质量较差

#### Cost（总成本）
- **TSP**: 总路径长度
- **CVRP**: 总行驶距离
- **OP**: 总收集奖励（越大越好）
- **PCTSP**: 总成本（距离+罚金）
- **PDP**: 总行驶距离

#### Time（计算时间）
- **越短越好**
- <1s: 实时级别
- 1s-1m: 快速
- 1m-1h: 中等
- \>1h: 慢速（经典求解器）

---

## 技术实现

### 文件结构

```
templates/
  └── benchmark.html          ← 算法对比页面（新增，约1300行）

app.py                        ← 添加/benchmark路由

templates/index.html          ← 添加导航链接
```

### 后端路由

```python
# app.py
@app.route('/benchmark')
def benchmark():
    """算法性能对比页面"""
    return render_template('benchmark.html')
```

### 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| **ECharts** | 5.4.3 | 图表绘制 |
| **HTML5** | - | 页面结构 |
| **CSS3** | - | 样式和动画 |
| **JavaScript** | ES6+ | 交互逻辑 |

### 核心函数

#### 1. updateCharts()

```javascript
function updateCharts() {
    // 1. 获取用户选择
    const nodeSize = document.getElementById('node-select').value;
    const problem = document.getElementById('problem-select').value;
    const metric = document.getElementById('metric-select').value;
    const category = document.getElementById('category-select').value;
    
    // 2. 筛选数据
    const data = benchmarkData[nodeSize][problem];
    let allMethods = [];
    
    // 根据category筛选
    if (category === 'all') {
        allMethods = [
            ...data.Classical,
            ...data.Greedy,
            ...data.Sampling,
            ...data.Multistart,
            ...data.Augmentation,
            ...data.Multistart_Aug
        ];
    } else {
        allMethods = data[category] || [];
    }
    
    // 3. 提取指标值
    const methods = allMethods.map(d => d.method);
    const values = allMethods.map(d => d[metric]);
    
    // 4. 更新统计信息
    updateStatistics(allMethods, metric);
    
    // 5. 配置并渲染图表
    const option = {
        title: {
            text: `${nodeSize}节点 ${problem} - ${metricNames[metric]}对比`,
            left: 'center'
        },
        xAxis: {
            type: 'category',
            data: methods
        },
        yAxis: {
            type: 'value',
            name: metricNames[metric]
        },
        series: [{
            type: 'bar',
            data: values,
            itemStyle: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    {offset: 0, color: '#667eea'},
                    {offset: 1, color: '#764ba2'}
                ])
            }
        }]
    };
    
    myChart.setOption(option, true);
}
```

#### 2. 时间转换函数

```javascript
function parseTime(timeStr) {
    // 将时间字符串转换为秒
    // "2m" → 120秒
    // "1m24s" → 84秒
    // "4h" → 14400秒
    // "<1s" → 1秒
    
    if (timeStr === '<1s') return 1;
    
    let totalSeconds = 0;
    const hourMatch = timeStr.match(/(\d+)h/);
    const minMatch = timeStr.match(/(\d+)m/);
    const secMatch = timeStr.match(/(\d+)s/);
    
    if (hourMatch) totalSeconds += parseInt(hourMatch[1]) * 3600;
    if (minMatch) totalSeconds += parseInt(minMatch[1]) * 60;
    if (secMatch) totalSeconds += parseInt(secMatch[1]);
    
    return totalSeconds;
}
```

### 数据结构

```javascript
benchmarkData = {
    "50": {
        "TSP": {
            "Classical": [
                {method: "Concorde", gap: 0.00, cost: 5.69, time: "4h"},
                {method: "LKH3", gap: 0.00, cost: 5.69, time: "8m"},
                {method: "Gurobi", gap: 0.00, cost: 5.69, time: "30m"},
                {method: "OR-Tools", gap: 0.06, cost: 5.69, time: "2m"}
            ],
            "Greedy": [
                {method: "AM", gap: 1.41, cost: 5.77, time: "<1s"},
                {method: "POMO", gap: 0.89, cost: 5.74, time: "<1s"},
                ...
            ],
            ...
        },
        ...
    },
    "20": {...}
}
```

---

## 自定义配置

### 修改颜色方案

```javascript
// 柱状图渐变色
itemStyle: {
    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
        {offset: 0, color: '#667eea'},  // 修改起始颜色
        {offset: 1, color: '#764ba2'}   // 修改结束颜色
    ])
}
```

### 修改图表高度

```css
.chart {
    height: 600px;  /* 修改为想要的高度 */
}
```

### 添加新的问题类型

```javascript
benchmarkData["50"]["NewProblem"] = {
    "Classical": [...],
    "Greedy": [...],
    ...
};

// 同时更新问题类型下拉框
<select id="problem-select">
    <option value="TSP">TSP</option>
    <option value="NewProblem">新问题类型</option>
</select>
```

---

## 界面设计

### 色彩方案
- **主色**: 蓝紫渐变 (#667eea → #764ba2)
- **背景**: 白色卡片 + 渐变背景
- **强调色**: 绿色（经典求解器）、蓝色（深度学习）

### 布局结构

```
┌─────────────────────────────────────────┐
│  Header (固定顶部导航)                   │
├─────────────────────────────────────────┤
│  Hero Section (标题和说明)               │
├─────────────────────────────────────────┤
│  Control Panel (4个筛选下拉框)           │
├─────────────────────────────────────────┤
│  Info Cards (3张统计卡片)                │
├─────────────────────────────────────────┤
│  Chart Container (动态柱状图)            │
│  ├─ Chart Title                         │
│  ├─ ECharts Bar Chart                   │
│  └─ Legend Box                          │
├─────────────────────────────────────────┤
│  Footer (版权信息)                       │
└─────────────────────────────────────────┘
```

### 响应式设计

#### 桌面端 (>768px)
- 4列控制面板
- 3列信息卡片
- 完整图表高度（600px）

#### 移动端 (<768px)
- 1列控制面板
- 1列信息卡片
- 紧凑图表高度（400px）
- X轴标签旋转45度

---

## 模型选择建议

| 场景 | 推荐算法 | 理由 |
|------|---------|------|
| **快速原型** | AM Greedy | 实现简单，速度快(<1s) |
| **生产部署** | POMO Greedy | 性能与速度平衡最好 |
| **学术研究** | Sym-NCO | SOTA性能，理论扎实 |
| **大规模问题** | MatNet / DeepACO | 专为大规模设计 |
| **时间充裕** | EAS + POMO | 质量最优（数据增强） |
| **实时应用** | AM / POMO | <1秒响应 |

---

## 相关文档

- [文件管理功能完整指南](文件管理功能完整指南.md)
- [动态GIF功能完整指南](动态GIF功能完整指南.md)
- [实时训练曲线功能完整指南](实时训练曲线功能完整指南.md)
- [模型知识库功能完整指南](模型知识库功能完整指南.md)

---

**文档版本**: v1.0.0  
**最后更新**: 2024年  
**数据来源**: KDD 2025 Conference  
**平台**: RL4CO 强化学习优化平台  
**单位**: 山西大学 计算机科学与技术学院

